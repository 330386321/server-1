Linux 下安装ffmpeg

一、下载地址(已经下载)
	http://www.ffmpeg.org/download.html  (git clone git://git.kernel.org/pub/scm/git/git.git)

二、解压
	$ tar zvfj ffmpeg-3.3.1.tar.bz2

三、解压后进入ffmpeg的文件夹,查看readme, 可以看到和正常的编译安装步骤无异configure && make && make install


四、路径设置（/usr/local/ffmpeg）
		
	$ ./configure --enable-shared --prefix=/usr/local/ffmpeg

这时候会编译出错（系统中没有yasm指令） 执行
	$ sudo apt-get install yasm

五、重新编译
	$ ./configure --enable-shared --prefix=/usr/local/ffmpeg

六、安装
	$ make install
	如果存在权限问题 因为之前编译时指定的文件夹是/usr/local/ffmpeg  所以需要sudo权限

	$ sudo make install
七、安装成功 执行
	$ /usr/local/ffmpeg/bin/ffmpeg    
 
	如果提示ffmpeg: error while loading shared libraries: libavdevice.so.56: cannot open shared object file: No such file or directory的错误
	找到这个库
	$ sudo find / -name "libavdevice.so.56"

	由结果可见, 在我们编译后的/usr/local/ffmpeg/lib/中存在libavdevice.so.56,  我们需要将这个库链接写到/etc/ld.so.conf中然后执行sudo ldconfig, 操作如下:
		
	$ sudo echo '/usr/local/ffmpeg/lib/libavdevice.so.56' >> /etc/ld.so.conf

	再执行
	$ sudo ldconfig
	
	执行 /usr/local/ffmpeg/bin/ffmpeg –version
	
	配置环境变量 path 
	export PATH=/usr/local/ffmpeg/bin/:$PATH 
	执行 env





