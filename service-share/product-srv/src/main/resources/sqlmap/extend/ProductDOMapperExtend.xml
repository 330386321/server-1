<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lawu.eshop.product.srv.mapper.extend.ProductDOMapperExtend">
    <resultMap id="BaseResultMap" type="com.lawu.eshop.product.srv.domain.extend.ProductDOView">
        <result column="feature_image" property="featureImage" jdbcType="VARCHAR"/>
        <result column="content" property="content" jdbcType="VARCHAR"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="original_price" property="originalPrice" jdbcType="DECIMAL"/>
        <result column="price" property="price" jdbcType="DECIMAL"/>
    </resultMap>

    <select resultMap="BaseResultMap" parameterType="com.lawu.eshop.product.param.ProductRecommendParam" id="listProductBycategoryId">
      select p.feature_image,p.content,pm.name,pm.original_price,pm.price
      from product_model pm left join product p on pm.product_id = p.id
      where p.status = #{productStatus,jdbcType=TINYINT} and p.category_id = #{categoryId,,jdbcType=INTEGER} and p.id != #{productId,jdbcType=BIGINT} and pm.status = #{productModelStatus,jdbcType=BIT}
      order by pm.sales_volume desc limit 10
  </select>
</mapper>