<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lawu.eshop.operator.srv.mapper.extend.RolePermissionDOMapperExtend" >
    <resultMap id="BaseResultMap" type="com.lawu.eshop.operator.srv.domain.extend.RolePermissionDOView" >
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <result column="id" property="id" jdbcType="INTEGER" />
        <result column="permission_name" property="permissionName" jdbcType="VARCHAR" />
        <result column="permission_key" property="permissionKey" jdbcType="VARCHAR" />

    </resultMap>


    <select resultType="Map" parameterType="java.lang.Integer" id="findRolePermissionList" >
    SELECT
        p. permission_name as permissionName,
        p.permission_key as permissionKey
    FROM
        role_permission AS rp
    INNER JOIN `role` AS r
    ON rp.role_id = r.id
    INNER JOIN permission as p
    ON rp.permission_id = p.id
    WHERE
        r.id = #{roleId}
    </select>

    <select resultMap="BaseResultMap" parameterType="java.lang.Integer" id="findRolePermission" >
        SELECT
        p.id,
        p. permission_name,
        p.permission_key

        FROM
        role_permission AS rp
        INNER JOIN `role` AS r
        ON rp.role_id = r.id
        INNER JOIN permission as p
        ON rp.permission_id = p.id
        WHERE
        r.id = #{roleId}
    </select>
</mapper>